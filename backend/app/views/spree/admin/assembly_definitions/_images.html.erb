<div id="images" data-hook></div>

<fieldset>  
  <div id="uploads_container"></div>
  <script id="template-upload" type="text/x-tmpl">
    <div id="upload_{%=o.unique_id%}" class="upload">
      <h5>{%=o.name%}</h5>
      <div class="progress progress-striped active"><div class="bar" style="width: 0%"></div></div>
    </div>
  </script>


  <%= s3_uploader_form callback_url: s3_callback_admin_assembly_definition_images_path(@assembly_definition),
    id: "s3_uploader",
    callback_param: "image[direct_upload_url]",
    expiration: 24.hours.from_now.utc.iso8601,
    max_file_size: 100.megabytes do %>
  
    <div class="field">
      <%= label_tag Spree.t(:filename) %><br>
      <%= file_field_tag :file, multiple: true %>
    </div>

  <% end %>
</fieldset>

<% unless @assembly_definition.images.any? %>
  <div class="no-objects-found">
    <%= Spree.t(:no_images_found) %>.
  </div>
<% else %>

  <table class="index sortable" data-hook="images_table" data-sortable-link="<%= update_positions_admin_assembly_definition_images_url(@assembly_definition) %>">
    <colgroup>
      <col style="width: 10%">
      <col style="width: 70%">
      <col style="width: 20%">
    </colgroup>
    <thead>
      <tr data-hook="images_header">
        <th colspan="2">Image</th>
        <th class="actions"></th>
      </tr>
    </thead>

    <tbody id="images_table_body">
      <%= render partial: 'image', collection: @assembly_definition.images %>
    </tbody>
  </table>

<% end %>