core.Static = {}; // Extend from this core object

$(document).on('ready page:load', function() {
  if (!$('body').hasClass('static')) return false;

  if ($('body').hasClass('vote-for-your-favourite')) {
    core.Static.randomiseBackgroundPosition();
  };

	if ($('body').hasClass('careers')) {
		core.Static.showJobFromHash();
	};

  if ($('body').hasClass('carousel')) {
    core.Static.readyCarousel();
  };

  if ($('body').hasClass('signup-carousel')) {
    core.Static.readySignupCarousel();
  };

  if ($('body').hasClass('fancyboxmodal')) {
    core.Static.fancyboxModal();
  };

  if ($('body').hasClass('hang-with-the-gang')) {
    core.Static.readyOlapicGallery();
  }

  if ($('body').hasClass('gang-labs')) {
    core.Static.readyTabs('desktop');
  }
});

$(window).bind('load', function() {

});

// Set a random background position (x-axis)
core.Static.randomiseBackgroundPosition = function() {
 var x_positions = ['-300px', '0', '300px'];
 var rand_num = Math.floor((Math.random() * x_positions.length));
 $('.row-hero').css('background-position', x_positions[rand_num] + ' 0');
}

core.Static.showJobFromHash = function() {
	var hash = window.location.hash.toString();

	if (hash.length > 0) {
		var job_id = $(hash);
		if (job_id) {
			job_id.click();
			window.location.href = hash;
		}
	}
}

core.Static.readyCarousel = function() {
  $('.owl-carousel').owlCarousel({
    navigation: true,
    loop:true,
    items: 3,
    rewindNav: false,
    responsive:true,
    responsiveRefreshRate: 200,
    navigationText: [
      '<%= cdn_prefix %>' + '/static/yarn/Big_Arrows_Left.png',
      '<%= cdn_prefix %>' + '/static/yarn/Big_Arrows_Right.png'
    ],
    responsive:{
      0:{
        items:1,
        nav:true
      },
      900:{
        items:3,
        nav:true
      }
    }
  });
}

core.Static.readyOlapicGallery = function() {
  OlapicWidget({
    'id': '51215f5af67327b835d902d720009f06',
    'wrapper': 'olapic_specific_widget'
  });
};

core.Static.readySignupCarousel = function() {
  // carousel settings
  $('.owl-carousel').owlCarousel({
    navigation: true,
    loop:true,
    items: 5,
    rewindNav: false,
    responsive:true,
    responsiveRefreshRate: 200,
    navigationText: [
      '<%= cdn_prefix %>' + '/static/free-knitting-patterns/free-patterns-arrow-left-thin.jpg',
      '<%= cdn_prefix %>' + '/static/free-knitting-patterns/free-patterns-arrow-right-thin.jpg'
    ],
    responsive:{
      0:{
        items:2,
        nav:true
      },
      900:{
        items:3,
        nav:true
      }
    }
  });

}

core.Static.fancyboxModal = function() {
  $('.fancybox').fancybox();
    $('.fancybox-media')
    .fancybox({
      openEffect : 'none',
      closeEffect : 'none',
      helpers : {
      media : {}
    }
  });
}

// Desktop mode and mobile mode
core.Static.readyTabs = function(mode) {
  var tab_links = mode == 'desktop' ? $('.row-tabs a') : $('.row-tab-mobile a');
  var tab_content = $('.row-tab-content');

  tab_links.on({
    click: function(e) {
      e.preventDefault();
      if (mode == 'desktop') {
        tab_links.removeClass('selected');
        $(this).addClass('selected');
      } else {
        $(this).closest('.row-tab-mobile').toggleClass('selected');
      }

      var tab_id = $(this).attr('href');
      if ($(tab_id)) {
        if (mode == 'desktop') {
          tab_content.removeClass('selected');
          $(tab_id).addClass('selected');
        } else {
          $(tab_id).toggleClass('selected');
        }
      }
    }
  });
}