core.suitesIndex = {};

var readySuitesIndex = function() {
	if (!$('body').hasClass('suites-index')) return false;

	// Kill existing event handlers before reassigning...
	//$('.row-product').find('*').off();

	if (core.isMobileWidthOrLess() === false) {
		core.productOverlays();
	}

	core.suitesIndex.readyLazyLoadImages();
	core.suitesIndex.extendClickableArea();
};

$(document).ready(readySuitesIndex);
$(document).on('page:load', readySuitesIndex);

/* ----- Init methods ----- */


core.suitesIndex.readyLazyLoadImages = function() {
	$('img.lazy-load').each(function() {
    $(this).lazyload({
			load: function() {
				// $(this).removeClass('lazy-load');
			}
		});
	});
}

// Where an index product has just one link on hover, extend the clickable area to the whole image
core.suitesIndex.extendClickableArea = function() {
	if (core.isTabletWidthOrLess() === false) {
		var lists = $('.row-product ul');

		lists.each(function() {
			var links = $(this).find('a');

			if (links.length == 1) {
				$(this).css('cursor', 'pointer');
				$(this).on('click', function(e) {
					window.location.href = links.attr('href');
				});
			}
		});
	}
}

/* ----- Non-init methods ----- */

// core.suitesIndex.showLoadingImage = function() {
// 	$('<%= cdn_image_tag("product-group/loading.gif", class: "loading-image", width: "60", height: "60",  alt: "") %>').insertAfter($('.row-product'));
// }

// core.suitesIndex.hideLoadingImage = function() {
// 	$('.loading-image').remove();
// }
