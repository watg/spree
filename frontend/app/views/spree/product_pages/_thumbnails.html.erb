<ul class="product-thumbnails thumbnails" data-hook>
  <% product.memoized_images.each do |i| %>
  <li class='tmb-all tmb-<%= i.viewable.id %>' style="<%= show_thumb(i, product.master)%>">
    <a href="<%= i.attachment.url(:large) %>" target="_blank" class="fancybox" data-fancybox-group="product-gallery-<%= variant.id %>">
      <%= image_tag(variant.placeholder_thumbnails, :class => 'lazy-load', :data => { :original => i.attachment.url(:mini) }) %>
    </a>
  </li>
  <% end %>
 
 <% product.memoized_personalisation_images.each do |i| %>
    <li class='tmb-personalisation tmb-personalisation-<%= i.viewable.id %>' style="<%= show_thumb(i, variant)%>" >
      <a href="<%= i.attachment.url(:large) %>" target="_blank" class="fancybox" data-fancybox-group="product-gallery-<%= variant.id %>">
        <%= image_tag(variant.placeholder_thumbnails, :class => 'lazy-load', :data => { :original => i.attachment.url(:mini) }) %>
      </a>
    </li>
  <% end %>

  <% if product.memoized_has_variants? %>
    
    <% product.memoized_variant_images.each do |i| %>

      <% next if product.memoized_images.include?(i) %>
      <li class="vtmb tmb-<%= i.variant_id %>" style="<%= show_thumb(i, variant)%>">
        <a href="<%= i.attachment.url(:large) %>" target="_blank" class="fancybox" data-fancybox-group="product-gallery-<%= variant.id %>">
          <%= image_tag(variant.placeholder_thumbnails, :class => 'lazy-load', :data => { :original => i.attachment.url(:mini) }) %>
        </a>
      </li>
    <% end %>
  <% end %>
</ul>
