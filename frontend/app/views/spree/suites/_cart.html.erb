<% present(selected_tab_presenter.product, @context) do |product_presenter| %>
  <% present(product_presenter.sale_variant_or_first_variant_or_master, @context) do |variant_presenter| %>

    <% if product_presenter.assembly_definition %>
      <div class="displayable-kit-entity row active">

    <% else %>

      <div class="displayable-entity row active"
           data-option-values="<%= product_presenter.option_types_and_values.to_json %>"
           data-tree="<%= product_presenter.variant_tree.to_json  %>"
           data-option-type-order="<%= product_presenter.option_type_order.to_json %>"
           data-variant-option-values="<%= product_presenter.variant_option_values.to_json %>">

    <% end %>

    <div class="row">
      <div class="large-6 small-12 columns">
        <div class="product-images" data-hook="product_images">
          <div class="main-image">
            <%= image_tag(variant_presenter.main_image_url, variant_presenter.main_image_options) %>
          </div>
          <div class="thumbnails" data-hook>
            <%= render :partial => 'thumbnails', :locals => {variant_presenter: variant_presenter, product_presenter: product_presenter} %>
          </div>
        </div>
      </div>

      <div class="large-6 small-12 columns">
        <h1><%= product_presenter.name %></h1>
        <p class="stock-level">Low stock <span class="stock-value"></span></p>
        <p class="digital-available">PDF + Printed Pattern</p>

        <%= render selected_tab_presenter.product_selector,
                      variant_presenter: variant_presenter,
                      product_presenter: product_presenter,
                      selected_tab_presenter: selected_tab_presenter,
                      suite_presenter: suite_presenter %>


        <%= render selected_tab_presenter.product_details,
                      variant_presenter: variant_presenter,
                      product_presenter: product_presenter,
                      selected_tab_presenter: selected_tab_presenter%>

      </div>
    </div>
    </div><!-- /row -->
    <div class="row-social">
      <div class="row">
        <div class="large-12 columns"></div>
      </div>
    </div>
  <% end # variant_presenter %>
<% end # product_presenter %>
